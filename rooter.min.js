(function(){var e,t,n;e={listeners:[],listen:function(e){return n.hash.listeners.push(e)},trigger:function(e){var t,r,i,s;e==null&&(e=n.hash.value()),e===""&&(e="/"),s=n.hash.listeners;for(r=0,i=s.length;r<i;r++)t=s[r],t(e)},value:function(e){return e&&(window.location.hash=e),window.location.hash.replace("#","")}},t={listeners:[],listen:function(e){return n.hash.listeners.push(e)},trigger:function(e){var t,r,i,s;e==null&&(e=n.hash.value()),e===""&&(e="/"),s=n.hash.listeners;for(r=0,i=s.length;r<i;r++)t=s[r],t(e)},value:function(e){return e&&(n.hash.lastHash=e,window.location.hash=e),window.location.hash.replace("#","")},lastHash:null,check:function(){var e;e=n.hash.value(),e!==n.hash.lastHash&&(n.hash.lastHash=e,n.hash.trigger(e)),setTimeout(n.hash.check,100)}},n={init:function(){return n.hash.listen(n.test),n.hash.check?n.hash.check():n.hash.trigger()},routes:{},lastMatch:null,route:function(e,t){var r;r="^"+e+"$",r=r.replace(/([?=,\/])/g,"\\$1").replace(/:([\w\d]+)/g,"([^/]*)"),n.routes[e]={names:e.match(/:([\w\d]+)/g),pattern:RegExp(r),fn:t}},test:function(e){var t,r,i,s,o,u,a,f,l,c,h;c=n.routes;for(a in c){r=c[a];if(s=r.pattern.exec(e)){n.lastMatch=a,u={};if(r.names){t=s.slice(1),h=r.names;for(i=f=0,l=h.length;f<l;i=++f)o=h[i],u[o.substring(1)]=t[i]}r.fn(u)}}}},typeof window.onhashchange!="undefined"?(n.hash=e,window.onhashchange=function(){return n.hash.trigger(n.hash.value())}):(n.hash=t,setTimeout(n.hash.check,100)),window.rooter=n}).call(this);